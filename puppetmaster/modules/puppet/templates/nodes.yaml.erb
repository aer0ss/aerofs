<% require "yaml"   -%>
<% require "puppet" -%>
<% directory = Dir.new("/var/lib/puppet/yaml/node") -%>
<% nodes = directory.map do |file| -%>
<%    next if File.directory?(file)  -%>
<%    node = YAML.load_file(File.join(directory.path, file)) -%>
<%    node.name -%>
<% end -%>
# This file is automatically generated by puppet
# Any changes you make will be overwritten
<%= YAML::dump(nodes) %>
