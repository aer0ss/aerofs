%% reset all configuration.
override_global.
override_local.
override_acls.

%% basic config.
{language, "en"}.
{loglevel, 4}.

%% only allow 1000 packets to be queued for every outgoing connection
{max_fsm_queue, 1000}.

%% authentication
{auth_method, external}.
{extauth_program, "/usr/local/bin/ejabberd_auth_all"}.

%% The 'admin' ACL grants administrative privileges to XMPP accounts.
{acl, admin, {user, "arrow-dev", "localhost"}}.

%% Local users: don't modify this line.
{acl, local, {user_regexp, ""}}.

%% Transport unit test users (use if you want to give special privileges to this user group)
{acl, transport, {user_regexp, "testuser-.*@arrowfs.org"}}.

%% Maximum number of simultaneous sessions allowed for a single user
{access, max_user_sessions, [{10, all}]}.

%% Only non-blocked users can use c2s connections
{access, c2s, [{deny, blocked}, {allow, all}]}.

%% All users are allowed to use the MUC service
{access, muc, [{allow, all}]}.

%% In-band registration allows registration of any possible username.
%% To disable in-band registration, replace 'allow' with 'deny'.
{access, register, [{allow, all}]}.

%% By default the frequency of account registrations from the same IP
%% is limited to 1 account every 10 minutes. To disable, specify: infinity
{registration_timeout, infinity}.

%% enabled hosts.
{hosts,  ["arrowfs.org"]}.
{listen, [
  {5222, ejabberd_c2s, [
            starttls, {certfile, "/usr/local/etc/ejabberd/ejabberd.pem"},
            {access, c2s},
            {max_stanza_size, 65536}
  ]},
]}.

%% enabled modules.
{modules, [
  {mod_ping,     []},
  {mod_disco,    []},
  {mod_muc,      [
          {host, "c.@HOST@"},
          {access, muc},
          {access_create, muc},
          {access_persistent, muc},
          {default_room_options, [
              {persistent, true},
              {public, true},
              {public_list, true},
              {logging, false}
              ]}
         ]}
 ]}.

%%% vim: set filetype=erlang tabstop=8 foldmarker=%%%',%%%. foldmethod=marker:
