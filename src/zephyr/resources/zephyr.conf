# zephyr staging service script

description "zephyr server"
author "Allen George <allen@aerofs.com>"

# when to start the service
start on runlevel [2345]

# when to stop the service
stop on runlevel [016]

# automatically restart zephyr if it crashes
# up to 10 times in a 60 second period
respawn
respawn limit 10 60

# Set a high ulimit for no files to allow a huge # of users to connect
limit nofile 1024000 1024000

# run zephyr and output standard err in /var/log/zephyr/zephyr.err.log
exec start-stop-daemon --start --chuid zephyr --chdir /opt/zephyr --exec /opt/zephyr/zephyr 2>> /var/log/aerofs/zephyr.err.log
