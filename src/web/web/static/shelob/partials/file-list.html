<div id="breadcrumb-and-actions">
  <div id="actions">
    <span aero-file-upload class="btn btn-primary" id="upload-file"></span>
    <button type="button" class="btn btn-default" id="new-folder" ng-click="newFolder.hidden=false">New Folder</button>
  </div>

  <ul class="breadcrumb">
      <li ng-if="currentFolder.id == 'root'" class="active">My Files</li>
      <li ng-if="currentFolder.id != 'root'"><a href="#/root">My Files</a></li>

      <li ng-repeat="folder in breadcrumbs">
        <a href="#/{{folder.id}}">{{folder.name}}</a>
      </li>

      <li ng-if="currentFolder.id != 'root'" class="active">
        {{currentFolder.name}}
      </li>
  </ul>
</div>

<table class="table table-hover" id="file-list">
  <thead>
    <tr>
      <th></th>
      <th>Name</th>
      <th>Last Modified</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
      <tr ng-if="!newFolder.hidden" id="new-folder">
        <td class="icon"><img src="/static/shelob/img/icons/40x40/filetype_folder.png"></td>
        <td class="name">
          <input in-place-edit
            type="text"
            ng-model="newFolder.name"
            focus-on="!newFolder.hidden"
            on-submit="submitNewFolder()"
            on-cancel="cancelNewFolder()"
            ng-disabled="outstandingRequests > 0"
          />
        </td>
        <td class="last-modified">--</td>
        <td class="actions"></td>
      </tr>

      <tr ng-if="!objects.length">
        <td class="icon"></td>
        <td colspan="3">No files found</td>
      </tr>

      <tr ng-repeat="object in objects | orderBy:['-type', 'name']"
          ng-init="mousedOver.object = null;"
          ng-mouseenter="mousedOver.object = object"
          ng-mouseleave="mousedOver.object = null"
          class="object">
        <td class="icon">
          <img ng-if="object.type == 'folder' && !object.is_shared" src="/static/shelob/img/icons/40x40/filetype_folder.png">
          <img ng-if="object.type == 'folder' && object.is_shared" src="/static/shelob/img/icons/40x40/filetype_shared_folder.png">
          <div ng-if="object.type == 'file'" aero-icon data-mime-type={{object.mime_type}}></div>
        </td>
        <td class="name">
          <a ng-if="object.type === 'folder'" ng-hide="object.edit" ng-href="#/{{object.id}}">{{object.name}}</a>
          <a ng-if="object.type === 'file' && object.size > 0" ng-hide="object.edit" ng-click="download(object.id)">{{object.name}}</a>
          <span ng-if="object.type === 'file' && (object.size === undefined || object.size === null || object.size === 0 || object.size === -1)">{{object.name}}</span>
          <input in-place-edit
                 ng-show="object.edit"
                 type="text"
                 ng-model="object.newName"
                 focus-on="object.edit"
                 on-submit="submitRename(object)"
                 on-cancel="cancelRename(object)"
                 ng-disabled="outstandingRequests > 0"/>
        </td>
        <td class="last-modified">{{object.last_modified | date: 'short'}}</td>
        <td class="actions">
          <div ng-show="mousedOver.object.id == object.id">
            <div class="btn-group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                Actions <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li><a
                   ng-click="startRename(object)"
                   class="edit action action-rename"><span class="glyphicon glyphicon-pencil"></span> Rename</a></li>
                <li><a
                   ng-click="startMove(object)"
                   class="redo action action-move"><span class="glyphicon glyphicon-arrow-right"></span> Move</a></li>
                <li><a ng-href="/shared_folders" ng-show="object.is_shared"
                   class="action action-manage"><span class="glyphicon glyphicon-share"></span> Manage Sharing</a></li>
                <li class="divider"></li>
                <li><a
                   ng-click="startDelete(object)"
                   class="remove_2 action action-delete"><span class="glyphicon glyphicon-trash"></span> Delete</a></li>
              </ul>
            </div>
          </div>
        </td>
      </tr>

  </tbody>
</table>
