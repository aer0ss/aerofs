<div ng-class="{waiting: outstandingRequests > 0}">

<div id="breadcrumb-and-actions">
  <div id="actions">
    <span aero-file-upload class="btn btn-default" id="upload-file"></span>
    <button type="button" class="btn btn-default" id="new-folder" ng-click="newFolder.hidden=false">New Folder</button>
  </div>

  <ul class="breadcrumb">
      <li ng-if="currentFolder.id == 'root'" class="active">My Files</li>
      <li ng-if="currentFolder.id != 'root'"><a href="#/root">My Files</a></li>

      <li ng-repeat="folder in breadcrumbs">
        <span class="divider">&rsaquo;</span>
        <a href="#/{{folder.id}}">{{folder.name}}</a>
      </li>

      <li ng-if="currentFolder.id != 'root'" class="active">
        <span class="divider">&rsaquo;</span>
        {{currentFolder.name}}
      </li>
  </ul>
</div>

<table class="table table-hover" id="file-list">
  <thead>
    <tr>
      <th></th>
      <th>Name</th>
      <th>Last Modified</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
      <tr ng-if="!newFolder.hidden" id="new-folder">
        <td class="icon"><img src="/static/shelob/img/icons/40x40/filetype_folder.png"></td>
        <td class="name">
          <input in-place-edit
            type="text"
            ng-model="newFolder.name"
            focus-on="!newFolder.hidden"
            on-submit="submitNewFolder()"
            on-cancel="cancelNewFolder()"
            ng-disabled="outstandingRequests > 0"
          />
        </td>
        <td class="last-modified">--</td>
        <td class="actions"></td>
      </tr>

      <tr ng-repeat="object in objects | orderBy:['-type', 'name']"
          ng-init="mousedOver.object = null;"
          ng-mouseenter="mousedOver.object = object"
          ng-mouseleave="mousedOver.object = null"
          class="object">
        <td class="icon">
          <img ng-if="object.type == 'folder'" src="/static/shelob/img/icons/40x40/filetype_folder.png">
          <div ng-if="object.type == 'file'" aero-icon data-mime-type={{object.mime_type}}></div>
        </td>
        <td class="name">
          <a ng-if="object.type == 'folder'" ng-hide="object.edit" ng-href="#/{{object.id}}">{{object.name}}</a>
          <a ng-if="object.type == 'file'" ng-hide="object.edit" ng-click="download(object.id)">{{object.name}}</a>
          <input in-place-edit
                 ng-show="object.edit"
                 type="text"
                 ng-model="object.newName"
                 focus-on="object.edit"
                 on-submit="submitRename(object)"
                 on-cancel="cancelRename(object)"
                 ng-disabled="outstandingRequests > 0"/>
        </td>
        <td class="last-modified">{{object.last_modified | date: 'short'}}</td>
        <td class="actions">
          <div ng-show="mousedOver.object.id == object.id">
            <img src="/static/shelob/img/glyphicons/glyphicons_434_redo.png"
                 tooltip="Move"
                 ng-click="startMove(object)"
                 class="action action-move"/>
            <img src="/static/shelob/img/glyphicons/glyphicons_150_edit.png"
                 tooltip="Rename"
                 ng-click="startRename(object)"
                 class="action action-rename"/>
            <img src="/static/shelob/img/glyphicons/glyphicons_207_remove_2.png"
                 tooltip="Delete"
                 ng-click="startDelete(object)"
                 class="action action-delete"/>
          </div>
        </td>
      </tr>

  </tbody>
</table>

</div>
