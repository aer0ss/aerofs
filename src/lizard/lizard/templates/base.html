<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="P2P file sharing and file sync lets you create your own hybrid and private
                    cloud. Secure, unlimited data transfer for large or sensitive files on Windows, Mac, Linux, Android and iOS">

        <title>{% block title %}{% endblock %}</title>

        <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}">

        <link href="{{ url_for('static', filename='css/google-open-sans.css') }}" rel="stylesheet" />
        <link href="{{ url_for('static', filename='css/bootstrap.css') }}" rel="stylesheet" />
        <link href="{{ url_for('static', filename='css/responsive.css') }}" rel="stylesheet" />
        <link href="{{ url_for('static', filename='css/aerofs.css') }}" rel="stylesheet" />
        <link href="{{ url_for('static', filename='css/lizard.css') }}" rel="stylesheet" />

        {# Le HTML5 shim, for IE6-8 support of HTML5 elements #}
        <!--[if lt IE 9]>
        <script src="{{ url_for('static', filename='js/html5.js') }}"></script>
        <![endif]-->
        {% block analytics_snippet %}{% endblock %}
    </head>
    <body>
        <div id="wrapper">
            <div id="dark-blue-header">
                <div class="container">
                    <div class="row">
                        <div class="span10 offset1">
                            <a class="brand" href="{% block navbar_logo_link %}{% endblock %}">
                                <img src="{{ url_for('static', filename='img/logo_small.png') }}" alt="AeroFS"/>
                            </a>
                            <ul class="pull-right">
                                {% block additional_nav_pills %}{% endblock %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            {# Message bar #}
            <div id="flash-msg-wrap">
                <span id="flash-msg-success" class="flash-msg" style="display: none">
                </span>
                <span id="flash-msg-error" class="flash-msg" style="display: none">
                    <table>
                        <tr><td id="flash-msg-error-body">
                            </td>
                            <td id="flash-msg-error-close">
                                <a class="close" onclick="fadeOutErrorMessage(); return false">
                                    &times;</a>
                        </td></tr>
                    </table>
                </span>
            </div>

            <div class="container">
                <div class="row">
                    <div class="span2 offset1">
                        {% block sidebar %}{% endblock %}
                    </div>
                    <div class="span8">
                        {% block content %}{% endblock %}
                    </div>
                </div>
            </div>

            <div id="footer-push"></div>
        </div>

        {% block footer_links %}{% endblock %}

        <script src="{{ url_for('static', filename='js/jquery.min.js') }}" ></script>
        <script src="{{ url_for('static', filename='js/jquery.easing.1.3.js') }}" ></script>
        <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}" ></script>
        <script src="{{ url_for('static', filename='js/aerofs.js') }}" ></script>

        {% with messages = get_flashed_messages(with_categories=True) %}
        {# TODO: this could use some cleaning up.  In particular, it would be
        nice for this to not generate JS blocks, but simply add a piece of DOM
        that the JS would interact with unconditionally. #}
            {% if messages %}
                {% for category, message in messages %}
                    {% if category == "error" %}
                        <script type="text/javascript">
                            $(document).ready(function() {
                                showErrorMessage("{{ message }}");
                            });
                        </script>
                    {% endif %}
                    {% if category == "success" %}
                        <script type="text/javascript">
                            $(document).ready(function() {
                                showSuccessMessage("{{ message }}");
                            });
                        </script>
                    {% endif %}
                    {% if category == "pardot" %}
                        <iframe id="pdiframe" src="{{ message }}" width='1' height='1'></iframe>
                    {% endif %}
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block scripts %}{% endblock %}
    </body>
</html>
