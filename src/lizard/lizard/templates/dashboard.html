{% extends "logged_in.html" %}

{% from "_formhelpers.html" import render_field, submit_button %}

{% block title %}Dashboard | AeroFS Private Cloud{% endblock %}

{% block content %}
    <h1>Dashboard</h1>
    {% if active_license %}
        <div class="row">
            <div class="col-sm-6">
                <h4>Active license</h4>
                <dl class="well well-sm dl-horizontal">
                    <dt>License type:</dt>
                    <dd>{% if active_license.is_trial %}Team{% else %}Business{% endif %}</dd>
                    <dt>Seats:</dt>
                    <dd>{{ active_license.seats }}</dd>
                    <dt>Valid until:</dt>
                    <dd>{{ active_license.expiry_date | date }}</dd>
                </dl>
            {% if newest_license.state == newest_license.states.PENDING %}
                <h4>Pending license</h4>
                <dl class="well well-sm dl-horizontal">
                    <dt>License type:</dt>
                    <dd>{% if newest_license.is_trial %}Team{% else %}Business{% endif %}</dd>
                    <dt>Seats:</dt>
                    <dd>{{ newest_license.seats }}</dd>
                    <dt>Valid until:</dt>
                    <dd>{{ newest_license.expiry_date | date }}</dd>
                </dl>
            {% endif %}
            {% if not active_license.is_trial and renewal_seats < active_license.seats %}
                <h4>Renewal information</h4>
                <dl class="well well-sm dl-horizontal">
                    <dt>Seats:</dt>
                    <dd>{{ renewal_seats }}</dd>
                    <dt>Renews on:</dt>
                    <dd>{{ active_license.expiry_date | date }}</dd>
                </dl>
            {% endif %}
                <h4>Purchase Business Licenses</h4>

                    <p>You can purchase or upgrade your <a href="https://www.aerofs.com/pricing" target="_blank">business</a> licenses at any time. If you need more than 1,000 seats,
                    please <a href="/contact">contact us</a>.</p>
                    <form role="form" class="form-inline" action="" method="post" name="seats">
                        {{ form.hidden_tag() }}
                        <p>
                            {{ render_field(form.count, type="number", no_divs=True, label_width=5, class="form-control")}}
                            {% if active_license.is_trial %}
                        </p>
                        <p>
                            <button type="submit" class="btn btn-success btn-block">Purchase licenses</button>
                            {% else %}
                            <button type="submit" class="btn btn-success btn-block">Change license count</button>
                            {% endif %}
                        </p>
                    </form>
                <br><br>
            </div>
            <div class="col-sm-6">
                <h4>AeroFS Private Cloud</h4>

                <p>Current version: <b>{{ appliance_version }}</b></p>
                <p>Visit our <a href="https://support.aerofs.com/hc/en-us/articles/201439644">release notes</a> for more information.</p>

                <p><a class="btn btn-default btn-block" href="{{ url_for('.download_latest_license') }}">
                    Download your latest license file</a>
                </p>

                <p><a class="btn btn-primary btn-block" href="{{ url_for('.download_ova') }}">
                    Download OVA (for VirtualBox, VMware)</a>
                </p>
                <p><a class="btn btn-primary btn-block" href="{{ url_for('.download_qcow') }}">
                    Download QCow2 (for OpenStack, EC2)</a>
                </p>
                <p><a class="btn btn-primary btn-block" href="{{ url_for('.download_vhd') }}">
                    Download VHD (for Hyper-V)</a>
                </p>

                <br/>
                <p>You may also choose to launch your AeroFS Private Cloud directly via docker and
                   cloud-init. See our
                   <a href="https://github.com/aerofs/aerofs-docker">github page</a> for detailed
                   instructions.</p>

                <br/>

                <h4>AeroFS for MobileIron</h4>

                <p><a class="btn btn-default btn-block" href="{{ mi_android_download }}">
                    Download Android Application</a>
                </p>

                <p><a class="btn btn-default btn-block" target="_blank" href="{{ mi_ios_app_store }}">
                    iOS App on the App Store</a>
                </p>
            </div>
        </div>

        <h4>How To Install AeroFS Private Cloud</h4>
        <p>AeroFS is provided in the industry standard OVF, QCow2, and VHD formats. It is also
        shipped in docker containers via cloud-init. Therefore, AeroFS will run in any virtual
        environment that supports Linux. This includes VirtualBox, VMWare, Hyper-V, Amazon AWS,
        DigitalOcean, Azure, and many others. For more details, check out our
        <a href="https://support.aerofs.com/hc/en-us/articles/204592794">FAQ</a> or
        <a href="{{ url_for('.contact_us') }}">contact us</a>.
        </p>
        <iframe width="640" height="390" src="//www.youtube.com/embed/pVqpobLdoHk" frameborder="0"
                allowfullscreen></iframe>

    {% else %}
        <p class="alert alert-info">Your license request is being processed. We'll send you an email when it's
            ready.</p>
    {% endif %}
{% endblock %}
