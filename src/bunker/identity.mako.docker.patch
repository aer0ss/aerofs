@@ -4,7 +4,7 @@
 <%! from web.views.maintenance.maintenance_util import unformat_pem %>
 
 <%namespace name="csrf" file="csrf.mako"/>
-<%namespace name="bootstrap" file="bootstrap.mako"/>
+<%namespace name="loader" file="loader.mako"/>
 <%namespace name="modal" file="modal.mako"/>
 <%namespace name="spinner" file="spinner.mako"/>
 <%namespace name="progress_modal" file="progress_modal.mako"/>
@@ -518,7 +518,7 @@
 </%progress_modal:html>
 
 <%block name="scripts">
-    <%bootstrap:scripts/>
+    <%loader:scripts/>
     <%progress_modal:scripts/>
     ## spinner support is required by progress_modal
     <%spinner:scripts/>
@@ -659,23 +659,24 @@
         }
 
         function restartServices(always) {
-            runBootstrapTask('restart-services-for-identity',
-                ## done
-                function() {
-                    var $successModal = $('#success-modal');
-                    $successModal.modal('show');
-                    $successModal.on('hidden.bs.modal', function() {
-                        ## this page has states, and the states are set when
-                        ## the app server generates the page. The state may
-                        ## change after we restart the service, so we ask the
-                        ## app server to generate this page again to ensure the
-                        ## page has the correct state after the change.
-                        window.location.assign('${request.route_path('identity')}');
-                    });
-                    always();
-                },
-                ## fail
-                always);
+            reboot('current', function() {
+                var $successModal = $('#success-modal');
+                $successModal.modal('show');
+                $successModal.on('hidden.bs.modal', function() {
+                    ## this page has states, and the states are set when
+                    ## the app server generates the page. The state may
+                    ## change after we restart the service, so we ask the
+                    ## app server to generate this page again to ensure the
+                    ## page has the correct state after the change.
+                    window.location.assign('${request.route_path('identity')}');
+                });
+                always();
+            },
+            ## fail
+            function(xhr) {
+                showErrorMessageFromResponse(xhr);
+                always();
+            });
         }
     </script>
 </%block>
