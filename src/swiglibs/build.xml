<?xml version="1.0"?>
<project name="aerofsd" default="build">
    <description>
        AeroFS Driver (not to be confused with the AeroFS Daemon)
    </description>
    <target name="prepare" depends="" description="setup folders">
        <mkdir dir="build"/>
        <mkdir dir="gen"/>
        <exec executable="qmake" dir="build">
            <arg value="../aerofsd.pro"/>
        </exec>
        <exec executable="make" dir="build">
            <arg value="compiler_gen_swg_make_all"/>
        </exec>
    </target>
    <target name="build" depends="prepare" description="build aerofsd.jar">
        <javac sourcepath="" destdir="build" includeAntRuntime="false"
            includeJavaRuntime="false" debug="on" debuglevel="lines,source">
            <compilerarg value="-Werror"/>
            <compilerarg value="-Xlint:all"/>
            <src path="gen"/>
        </javac>
        <jar destfile="build/aerofsd.jar" basedir="build" includes="com/**">
        </jar>
    </target>
    <!-- TODO separate swig generation from native build -->
    <target name="build_libraries" depends="prepare" description="build native library for the current platform">
        <exec executable="make" dir="build">
        </exec>
    </target>
    <target name="clean" depends="" description="clean build artifacts">
        <exec executable="make" dir="build">
            <arg value="clean"/>
        </exec>
        <delete dir="build"/>
        <delete dir="gen"/>
    </target>
</project>
