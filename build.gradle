//-----------------------------------------------------------------------------
// Copyright (c) Air Computing Inc., 2013.
//-----------------------------------------------------------------------------

//-----------------------------------------------------------------------------
// common library declarations
//-----------------------------------------------------------------------------

ext {
    libs = [aerofs_dropwizard: ['com.yammer.dropwizard:dropwizard-core:0.6+',
                                'com.yammer.metrics:metrics-graphite:2.2+']
    ]

    clientResourcesDir = "${rootDir}/resource/client"
    commonResourcesDir = "${rootDir}/resource/common"
    serverResourcesDir = "${rootDir}/resource/server"
}

//-----------------------------------------------------------------------------
// common subproject configuration
//-----------------------------------------------------------------------------

subprojects {
    apply plugin: 'java'

    configurations.all {
        // exclude downloading libraries we ship ourselves
        exclude module: 'findbugs'
        exclude module: 'guava'
        exclude module: 'commons-logging'
        exclude module: 'slf4j-api'
        exclude module: 'log4j-over-slf4j'
        exclude group:  'ch.qos.logback'

        // force common versions of certain libraries
        resolutionStrategy {
            force 'com.yammer.dropwizard:dropwizard-core:0.6.2',
                  'com.yammer.metrics:metrics-graphite:2.2.0',
                  'com.fasterxml.jackson.core:jackson-annotations:2.2.1'
        }
    }

    // repositories dependencies are sourced from
    repositories {
        mavenLocal()
        maven { url 'http://repos.arrowfs.org/nexus/content/repositories/central/' }
        maven { url 'http://repos.arrowfs.org/nexus/content/repositories/apache-snapshots/' }
        maven { url 'http://repos.arrowfs.org/nexus/content/repositories/codehaus-snapshots/' }
        maven { url 'http://repos.arrowfs.org/nexus/content/repositories/google-api-client-libraries/' }
        maven { url 'http://repos.arrowfs.org/nexus/content/repositories/thirdparty/' }
        maven { url 'http://repos.arrowfs.org/nexus/content/repositories/releases/' }
        maven { url 'http://repos.arrowfs.org/nexus/content/repositories/OpenConext/' }
        maven { url 'http://repos.arrowfs.org/nexus/content/repositories/snapshots/' }
    }


    // disable all the java plugin tasks
    compileJava.enabled false
    processResources.enabled false
    classes.enabled false
    compileTestJava.enabled false
    processTestResources.enabled  false
    testClasses.enabled false
    jar.enabled false
    javadoc.enabled false
    test.enabled false
    uploadArchives.enabled false
}
